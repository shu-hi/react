{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/react/my-app/src/app/playground/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect,useRef} from 'react';\nimport './app.css';\nimport { nodeServerAppPaths } from 'next/dist/build/webpack/plugins/pages-manifest-plugin';\n\n\n// Itemの型定義\ntype Item = {\n  columns: string[];\n  name: string;\n  serial: number;\n};\ninterface TableResponse {\n  status: string;\n  data: {\n    name: string;\n    columns: string;\n    serial: number;\n  }[];\n}\n\nconst App: React.FC = () => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [itemsA,setItemsA] = useState<Item[]>([]);\n  const [itemsB,setItemsB] = useState<Item[]>([]);\n  const [nodesList,setNodes]=useState<[string,number,string,number][]>([]);\n  const fetchTable = async () => {\n      const res = await fetch(\"http://54.65.233.242/api/get_table\");\n      const data: TableResponse = await res.json();\n      const updatedData = data.data.map(item => ({\n    ...item,\n    columns: item.columns.split(\",\"), // item.columnsが文字列なので、これをパースして配列に\n  }));\n\n  setItemsA(updatedData); \n    };\n  useEffect(() => {\n    // ページロード時に GET API を叩く\n    fetchTable();\n    console.log(nodesList);\n  }, []);\n  \n  const onDragStart = (e: React.DragEvent<HTMLDivElement>, item: Item, from: 'A' | 'B') => {\n    e.dataTransfer.setData('item', JSON.stringify(item));\n    e.dataTransfer.setData('from', from);\n  };\n\n  const onDrop = (\n    e: React.DragEvent<HTMLDivElement>,\n    target: 'A' | 'B'\n  ) => {\n    e.preventDefault();\n    const itemData = e.dataTransfer.getData('item');\n    const fromList = e.dataTransfer.getData('from') as 'A' | 'B';\n    const droppedItem: Item = JSON.parse(itemData);\n  \n    if (target === fromList) return; // 同じリストへのドロップは無視\n  \n    // 両リストを更新する（元から削除、先に追加）\n    let newItemsA = itemsA;\n    let newItemsB = itemsB;\n  \n    if (fromList === 'A') {\n      newItemsA = itemsA.filter(i => i.serial !== droppedItem.serial);\n      newItemsB = [...itemsB, droppedItem];\n    } else {\n      newItemsB = itemsB.filter(i => i.serial !== droppedItem.serial);\n      newItemsA = [...itemsA, droppedItem];\n    }\n  \n    // 一括で更新\n    setItemsA(newItemsA);\n    setItemsB(newItemsB);\n  };\n  const dragNode=(\n    e:React.DragEvent<HTMLSpanElement>,\n    item:string,\n    index:number\n  )=>{\n    let nodes=nodesList.filter(node=>node[2]!==\"notConnected\");\n    nodes=[...nodes,[item,index,\"notConnected\",0]];\n    setNodes(nodes);\n  }\n  const connectNode=(\n    e:React.DragEvent<HTMLSpanElement>,\n    item:string,\n    index:number\n  )=>{\n    e.preventDefault();\n    let nodes=nodesList;\n    const connectedNodes=nodes.map(node=>{\n      if(node[2]===\"notConnected\"&&node[0]!=item){\n        return [node[0],node[1],item,index] as [string,number,string,number];\n      }else{\n        return node;\n      }\n    });\n    setNodes(connectedNodes);\n  }\n  const resetButton=(itemName:string)=>{\n    let nodes=nodesList.filter(node=>node[0]!==itemName&&node[2]!==itemName);\n    \n    setNodes(nodes);\n  }\n  const delNode=(node2del:[string, number, string, number])=>{\n    let nodes=nodesList.filter(node=>node!==node2del);\n    console.log(nodes);\n    setNodes(nodes);\n  }\n  const onDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n  };\n\n  return (\n    <div className=\"container\" ref={containerRef}>\n      {/* リストA */}\n      <div\n        className=\"list\"\n        onDrop={(e) => onDrop(e, 'A')}\n        onDragOver={onDragOver}\n      >\n        <h3>リストA（ドラッグ元）</h3>\n        {itemsA.map(item => (\n          <div\n            key={item.serial}\n            className=\"draggable\"\n            draggable\n            onDragStart={(e) => onDragStart(e, item, 'A')}\n          >\n            {item.name}\n            \n          </div>\n        ))}\n      </div>\n\n      {/* リストB */}\n      <div\n        className=\"dropzone\"\n        onDrop={(e) => onDrop(e, 'B')}\n        onDragOver={onDragOver}\n      >\n        <h3>リストB（ドロップ先）</h3>\n        {itemsB.map(item => (\n          <div\n            key={item.serial}\n            className=\"draggable\"\n            draggable\n            onDragStart={(e) => onDragStart(e, item, 'B')}\n          >\n            {item.name}<button className=\"reset\" onClick={() => resetButton(item.name)}>\n                          ↺\n                        </button>\n            <div className=\"nodes\">\n            {item.columns.map((column,index)=>(\n              <span \n                id={`node-${item.name}-${index}`}\n                key={index} \n                className=\"column-item draggable\" \n                draggable\n                onDragStart={(e) => dragNode(e, item.name, index)}\n                onDrop={(e) => connectNode(e, item.name, index)}\n                onDragOver={onDragOver}>\n\n                {column}\n\n              </span>\n            ))}\n            </div>\n          </div>\n        ))}\n      </div>\n      <a\n          href=\"/edit_table\"\n          className=\"text-blue-600 hover:underline\"\n        >\n          edit table\n        </a>\n    <svg className=\"connection-layer\">{/*node接続表示*/}\n      {nodesList.map(([fromItem, fromIdx, toItem, toIdx], i) => {\n        const fromEl = document.getElementById(`node-${fromItem}-${fromIdx}`);\n        const toEl = document.getElementById(`node-${toItem}-${toIdx}`);\n        if (!fromEl || !toEl) return null;\n  \n        const fromRect = fromEl.getBoundingClientRect();\n        const toRect = toEl.getBoundingClientRect();\n  \n        const containerRect = containerRef.current?.getBoundingClientRect();\n        if (!containerRect) return null;\n  \n        const x1 = fromRect.left + fromRect.width / 2 - containerRect.left;\n        const y1 = fromRect.top + fromRect.height / 2 - containerRect.top;\n        const x2 = toRect.left + toRect.width / 2 - containerRect.left;\n        const y2 = toRect.top + toRect.height / 2 - containerRect.top;\n  \n        return (\n          <line\n            key={i}\n            x1={x1}\n            y1={y1}\n            x2={x2}\n            y2={y2}\n            stroke=\"blue\"          // ← 色を指定\n            strokeWidth=\"2\"\n            strokeOpacity=\"0.5\" \n            onClick={() => delNode([fromItem, fromIdx, toItem, toIdx])}\n          />\n        );\n      })}\n  </svg>\n    </div>\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/react/my-app/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/react/my-app/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/react/my-app/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}